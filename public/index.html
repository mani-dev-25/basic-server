<!DOCTYPE html>
<html>

<head>
    <title>online shopping</title>
    <link rel="icon" href="E:\clg backend\Express\experiment\online_shopping\logo.png">
</head>

<body>
    <h1 style="text-align: center; ">Online <span style="color: red;">Shopping</span></h1>
    <hr>
    <h2><u>Admin panel</u></h2>
    <h2>Insert data</h2>
    <form method="post" action="http://localhost:3000/api/items">
        <input type="number" name="itemId" placeholder="enter item id" required><br>
        <input type="text" name="itemName" placeholder="enter item name" required><br>
        <input type="number" name="price" placeholder="enter price" required><br>
        <input type="number" name="available" placeholder="enter available stock" required><br>
        <button type="submit">Submit</button>
    </form>
    <h2>Read data</h2>
    <button><a href="http://localhost:3000/api/items">view data</a></button>
    <h2>update item</h2>
    <form id="updateData">
        <input type="number" id="itemId" name="itemId" placeholder="enter item id" required><br>
        <input type="text" id="itemName" name="itemName" placeholder="enter item name" required><br>
        <input type="number" id="price" name="price" placeholder="enter price" required><br>
        <input type="number" id="available" name="available" placeholder="enter available stock" required><br>
        <button type="submit">Submit</button>
    </form>
    <h2>Delete data using Id</h2>
    <form id="deleteData">
        <input type="text" id="deleteItemId" placeholder="enter item id" required>
        <input type="submit">
    </form>
    <script>
        //update 
    document.getElementById("updateData").addEventListener("submit", async function (e) {
        e.preventDefault()
        const itemId=document.getElementById("itemId").value
        const itemName = document.getElementById("itemName").value
        const price = document.getElementById("price").value
        const available = document.getElementById("available").value

        const response = await fetch(`http://localhost:3000/api/items/${itemId}`, {
            method: "PUT",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify({
                itemName:itemName,
                price:price,
                available:available
            })
        })
        const data =await response.text()
        alert(data)
    })
    //delete
    document.getElementById("deleteData").addEventListener("submit", async function (e) {
        e.preventDefault()
        const itemId = document.getElementById("deleteItemId").value
        const response = await fetch(`http://localhost:3000/api/items/${itemId}`, {
            method: "DELETE"
        })
        const data =await response.text()
        alert(data)
    })

</script>
</body>

</html>
